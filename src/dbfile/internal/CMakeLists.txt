add_library(tinydb_dbfile_internal)
tinydb_target_module_if_enabled(tinydb_dbfile_internal
    HEADER_FILES
    page_base.hxx
    page_serialize.hxx
    page_impl.hxx
    btree.hxx
    freelist.hxx
    tbl.hxx
    SOURCE_FILES
    page_base.cxx
    page_serialize.cxx
    page.cxx
    btree.cxx
    freelist.cxx
    tbl.cxx
    MODULE_FILES
    page.cxx
    page_base.cxx
    page_impl.cxx
    page_serialize.cxx
    # btree.cxx
    freelist.cxx
    tbl.cxx
)
target_link_libraries(tinydb_dbfile_internal
    PUBLIC
    tinydb_general
    PRIVATE
    tinydb_compile_opts
)
if(tinydb_ENABLE_UNIT_TEST)
    add_subdirectory(test)
endif()
